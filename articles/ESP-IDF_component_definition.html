<!doctype html>
<html lang="en-US">
<head>
  <meta charset="UTF-8"></meta>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CalinRadoni.github.io</title>
  <link rel="stylesheet" href="../base.css">
</head>

<body>
  <header>
    <div class="topNavItem">
      <pre>
      Notes on component definition for ESP-IDF stable (v3.3.x) and ESP-IDF v4.x
      </pre>
    </div>
    <div class="topNavItem"><a href="../index.html">Home</a></div>
  </header>

  <section class="article-body">
    <p>Minimal CMakeLists.txt file:</p>

    <p class="code-title">ESP-IDF stable (v3.3.x)</p>
    <pre class="AAA">
      set(COMPONENT_SRCS "foo.c" "bar.c")
      set(COMPONENT_ADD_INCLUDEDIRS ".")
      register_component()
    </pre>
    <p class="code-title">ESP-IDF v4.x</p>
    <pre class="C++">
      idf_component_register(SRCS "foo.c" "bar.c"
                             INCLUDE_DIRS ".")
    </pre>

    <p>If the component needs other components <b>only</b> for compiling it add them as <b>private required</b></p>

    <p class="code-title">ESP-IDF stable (v3.3.x)</p>
    <pre>
      set(COMPONENT_SRCS "foo.c" "bar.c")
      set(COMPONENT_ADD_INCLUDEDIRS ".")
      set(COMPONENT_PRIV_REQUIRES componentA componentB)
      register_component()
    </pre>
    <p class="code-title">ESP-IDF v4.x</p>
    <pre>
      idf_component_register(SRCS "foo.c" "bar.c"
                             INCLUDE_DIRS "."
                             PRIV_REQUIRES componentA componentB)
    </pre>

    <p>else add them as <b>reqired</b> and will be available for the entire project</p>

    <p class="code-title">ESP-IDF stable (v3.3.x)</p>
    <pre>
      set(COMPONENT_SRCS "foo.c" "bar.c")
      set(COMPONENT_ADD_INCLUDEDIRS ".")
      set(COMPONENT_PRIV_REQUIRES componentA componentB)
      set(COMPONENT_REQUIRES componentC componentD)
      register_component()
    </pre>
    <p class="code-title">ESP-IDF v4.x</p>
    <pre>
      idf_component_register(SRCS "foo.c" "bar.c"
                             INCLUDE_DIRS "."
                             PRIV_REQUIRES componentA componentB
                             REQUIRES componentC componentD)
    </pre>
  </section>

  <footer>
    <p>
      &copy; 2019 - present <a href="https://github.com/CalinRadoni">Calin Radoni</a><br/>
      Unless otherwise specified, site's Code is released under the <a href="https://github.com/CalinRadoni/CalinRadoni.github.io/blob/master/LICENSE">MIT License</a> and Docs released under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
    </p>
  </footer>
</body>
</html>
