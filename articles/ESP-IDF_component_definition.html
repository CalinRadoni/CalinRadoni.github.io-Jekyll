<!doctype html>
<html lang="en-US">
<head>
  <meta charset="UTF-8"></meta>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CalinRadoni.github.io</title>
  <link rel="stylesheet" href="../base.css">
</head>

<body>
  <section class="intro">
    Notes on component definition for ESP-IDF stable (v3.3.x) and ESP-IDF v4.x
  </section>
  <section class="article-body">
    <p>Minimal CMakeLists.txt file:</p>

    <p class="code-title">ESP-IDF stable (v3.3.x)</p>
    <pre class="AAA">
      set(COMPONENT_SRCS "foo.c" "bar.c")
      set(COMPONENT_ADD_INCLUDEDIRS ".")
      register_component()
    </pre>
    <p class="code-title">ESP-IDF v4.x</p>
    <pre class="C++">
      idf_component_register(SRCS "foo.c" "bar.c"
                             INCLUDE_DIRS ".")
    </pre>

    <p>If the component needs other components <b>only</b> for compiling it add them as <b>private required</b>

    <div class="code-title">ESP-IDF stable (v3.3.x)</div>
    <pre>
      set(COMPONENT_SRCS "foo.c" "bar.c")
      set(COMPONENT_ADD_INCLUDEDIRS ".")
      set(COMPONENT_PRIV_REQUIRES componentA componentB)
      register_component()
    </pre>

    <div class="code-title">ESP-IDF v4.x</div>
    <pre>
      idf_component_register(SRCS "foo.c" "bar.c"
                             INCLUDE_DIRS "."
                             PRIV_REQUIRES componentA componentB)
    </pre>
    </p>

    else add them as <b>reqired</b> and will be available for the entire project

    <div class="code-title">ESP-IDF stable (v3.3.x)</div>
    <pre>
      set(COMPONENT_SRCS "foo.c" "bar.c")
      set(COMPONENT_ADD_INCLUDEDIRS ".")
      set(COMPONENT_PRIV_REQUIRES componentA componentB)
      set(COMPONENT_REQUIRES componentC componentD)
      register_component()
    </pre>

    <div class="code-title">ESP-IDF v4.x</div>
    <pre>
      idf_component_register(SRCS "foo.c" "bar.c"
                             INCLUDE_DIRS "."
                             PRIV_REQUIRES componentA componentB
                             REQUIRES componentC componentD)
    </pre>
</pre>

  </section>
  <section class="article-footer">
    <a href="../index.html">Home</a>
  </section>
</body>
</html>
