---
layout: post
title: "VMware Workstation Player on Ubuntu"
description: "Install VMware Workstation Player on Ubuntu LTS"
#image: /assets/img/.png
#date-modified: 2020-mm-dd
excerpt_separator: <!--more-->
categories: [ "System Administration" ]
tags: [ "VMware", "VMware Workstation", "VMware Workstation Player" ]
---

The installation should be simple but there are (solvable) problems if the host boots from UEFI with secure boot enabled.
This guide was tested on Ubuntu 20.04 with VMware Workstation Player 17.

## Installation

Download [VMware Workstation Player](https://www.vmware.com/products/workstation-player.html) in a temporary directory, verify its SHA256 checksum (you should find the checksum on the download page) then start the `.bundle` as root:

```sh
sudo sh VMware-Player-Full-17.0.0-20800274.x86_64.bundle
```

If the hosts boots from UEFI with secure boot enabled you have to sign the VMware drivers.
Adapted from [VMware article 2146460](https://kb.vmware.com/s/article/2146460), here are the steps:

```sh
# Generate a certificate and a key pair using openssl to sign vmmon and vmnet modules
openssl req -new -x509 -newkey rsa:2048 -keyout MOK.priv -outform DER -out MOK.der -nodes -days 36500 -subj "/CN=VMWare"

# Sign the modules using the generated certificate and the private key
sudo /usr/src/linux-headers-`uname -r`/scripts/sign-file sha256 ./MOK.priv ./MOK.der $(modinfo -n vmmon)
sudo /usr/src/linux-headers-`uname -r`/scripts/sign-file sha256 ./MOK.priv ./MOK.der $(modinfo -n vmnet)

# Import the certificate to the system's MOK list
sudo mokutil --import MOK.der
```

**Note**: you need to provide a password for the private key that is generated by openssl ! That password will be needed after reset for MOK enrollment.

Restart the system (`sudo shutdown -r now`). The system should enter UEFI key management and you should `Enroll MOK`.
The password that protects the private key generated previously is needed now.

```sh
# Delete the certificate and the private key
rm -rf MOK.der
rm -rf MOK.priv
```

## Linux kernel updates

After updating the kernel, from [VMware article 1002411](https://kb.vmware.com/s/article/1002411), `vmware-modconfig` runs the first time Workstation launches after the kernel is updated and you need to enter the root password.

To re-configure without launching Workstation run this command, after upgrading the kernel:

```sh
sudo vmware-modconfig --console --install-all
```
