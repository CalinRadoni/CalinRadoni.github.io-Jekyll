<!doctype html>
<html lang="en-US">
<head>
  <meta charset="UTF-8"></meta>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CalinRadoni.github.io</title>
  <link rel="stylesheet" href="../base.css">
</head>

<body>
  <section class="note-name theme1">
    <p class="note-title">Component definition for ESP-IDF</p>
    <p class="note-subtitle">2020.02.04</p>
    <div class="note-home"><a href="../index.html">Home</a></div>
  </section>

  <section class="note-body theme2">
    <p class="chapter1">
      Notes on component definition for <span class="no-wrap">ESP-IDF stable (v3.3.x)</span>
      and <span class="no-wrap">ESP-IDF v4.x</span>
    </p>

    <p>For an <code>ESP-IDF</code> component, the content of <b>CMakeLists.txt</b> is as follow:</p>

    <div class="note-table">
      <div class="note-cell">
        <div class="code-title font-s09">ESP-IDF stable</div>
  <div class="code-body">set(COMPONENT_SRCS "foo.c" "bar.c")
set(COMPONENT_ADD_INCLUDEDIRS ".")
set(COMPONENT_PRIV_REQUIRES componentA componentB)
set(COMPONENT_REQUIRES componentC componentD)
register_component()</div>
      </div>
      <div class="note-cell">
        <div class="code-title font-s09">ESP-IDF v4.x</div>
  <div class="code-body">idf_component_register(
    SRCS "foo.c" "bar.c"
    INCLUDE_DIRS "."
    PRIV_REQUIRES componentA componentB
    REQUIRES componentC componentD)</div>
      </div>
    </div>

    <ul>
    <li>Use <code>COMPONENT_PRIV_REQUIRES / PRIV_REQUIRES</code> to declare the components needed <b>only</b> for compiling this component;</li>
    <li>Use <code>COMPONENT_REQUIRES / REQUIRES</code> to declare the components needed by this component and any projects that includes this component;</li>
    <li>If not needed, <code>COMPONENT_PRIV_REQUIRES / PRIV_REQUIRES</code> and <code>COMPONENT_REQUIRES / REQUIRES</code> can be omitted;</li>
    <li>For more informations see <a href="https://docs.espressif.com/projects/esp-idf/en/stable/api-guides/build-system-cmake.html#component-cmakelists-files">Component CMakeLists Files</a> for <code>ESP-IDF</code> stable.
    </ul>

    <p>
      <b>Note:</b> As of February 2020, according to <a href="https://github.com/espressif/esp-idf/releases/tag/v3.3.1">ESP-IDF Release v3.3.1</a>,
      <code>ESP-IDF v3.3.x</code> is the current stable release and should be supported until February 2022.
    </p>
  </section>

  <section class="footer theme3">
    <p class="note-width">
    &copy; 2019 - present <span class="no-wrap"><a href="https://github.com/CalinRadoni">Calin Radoni</a></span><br/>
    Unless otherwise noted, site's Code is released under the
    <span class="no-wrap"><a href="https://github.com/CalinRadoni/CalinRadoni.github.io/blob/master/LICENSE">MIT License</a></span>
    and Docs are released under <span class="no-wrap"><a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></span>
    </p>
  </section>
</body>
</html>
